---
title: GitHubActions
author: xbZhong
isOriginal: true
article: true
category: backend
timeline: true
icon: mdi:github
date: 2025-10-24
---

[æœ¬é¡µPDF](/pdfs/backend/GitHubActions.pdf)


## GithubAction

Githubæä¾›çš„ä¸€ä¸ª**æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²(CI/CD)å¹³å°**

å¯ä»¥åœ¨**ä»£ç æäº¤ã€æ‹‰å–è¯·æ±‚ã€å‘å¸ƒç‰ˆæœ¬**ç­‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œ**è‡ªåŠ¨æ‰§è¡Œè„šæœ¬æˆ–è€…æµç¨‹**

å…è´¹é¢åº¦ï¼š2000åˆ†é’Ÿ/æœˆ

### ä½¿ç”¨

éœ€è¦åœ¨`.github/workflows`ä¸‹åˆ›å»ºä¸€ä»½`yml`æ–‡ä»¶ï¼Œé‡Œé¢ç¼–å†™æˆ‘ä»¬çš„è„šæœ¬

**ç¤ºä¾‹**

```yml
name: éƒ¨ç½²å‰ç«¯é¡¹ç›®åˆ° GitHub Pages    # å·¥ä½œæµåç§°ï¼Œä¼šæ˜¾ç¤ºåœ¨ Actions é¡µé¢ä¸­

# ---------------------------------------------------------
# ğŸ‘‡ onï¼šå®šä¹‰è§¦å‘æ¡ä»¶
# ---------------------------------------------------------
on:
  push:                            # å½“æœ‰ push äº‹ä»¶æ—¶è§¦å‘
    branches:                      # é™åˆ¶è§¦å‘çš„åˆ†æ”¯
      - main                       # ä»…å½“æ¨é€åˆ° main åˆ†æ”¯æ—¶æ‰è§¦å‘
  workflow_dispatch:               # å…è®¸æ‰‹åŠ¨åœ¨ GitHub é¡µé¢ç‚¹å‡»â€œRun workflowâ€æ‰§è¡Œ

# ---------------------------------------------------------
# ğŸ‘‡ jobsï¼šå®šä¹‰è¦æ‰§è¡Œçš„ä»»åŠ¡
# ---------------------------------------------------------
jobs:
  build-and-deploy:                # ä»»åŠ¡åï¼ˆå¯ä»¥è‡ªå®šä¹‰ï¼‰
    runs-on: ubuntu-latest         # ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Ubuntu è™šæ‹Ÿæœºç¯å¢ƒ

    # -----------------------------------------------------
    # ğŸ‘‡ stepsï¼šå®šä¹‰ä»»åŠ¡ä¸­çš„æ¯ä¸€æ­¥
    # -----------------------------------------------------
    steps:
      # ç¬¬ 1 æ­¥ï¼šæ£€å‡ºä»£ç ï¼ˆæ‹‰å–å½“å‰ä»“åº“å†…å®¹ï¼‰
      - name: Checkout repository
        uses: actions/checkout@v4

      # ç¬¬ 2 æ­¥ï¼šè®¾ç½® Node.js è¿è¡Œç¯å¢ƒ
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18         # æŒ‡å®š Node.js ç‰ˆæœ¬ä¸º 18

      # ç¬¬ 3 æ­¥ï¼šå®‰è£…ä¾èµ–
      - name: Install dependencies
        run: npm install           # æ‰§è¡Œå‘½ä»¤è¡ŒæŒ‡ä»¤

      # ç¬¬ 4 æ­¥ï¼šæ„å»ºé¡¹ç›®
      - name: Build project
        run: npm run build         # æ„å»ºç»“æœä¸€èˆ¬è¾“å‡ºåˆ° dist ç›®å½•

      # ç¬¬ 5 æ­¥ï¼šéƒ¨ç½²åˆ° GitHub Pages
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}   # å†…ç½®çš„ä»“åº“è®¿é—®ä»¤ç‰Œ
          publish_dir: ./dist                        # æŒ‡å®šè¦å‘å¸ƒçš„ç›®å½•ï¼ˆæ„å»ºäº§ç‰©ï¼‰

      # ç¬¬ 6 æ­¥ï¼ˆå¯é€‰ï¼‰ï¼šéƒ¨ç½²å®Œæˆåæ‰“å°ä¿¡æ¯
      - name: Done
        run: echo "ğŸš€ éƒ¨ç½²å®Œæˆï¼"

```

- `name`ï¼šå·¥ä½œæµåç§°
- `on`ï¼šé€‰æ‹©è¦è§¦å‘çš„äº‹ä»¶ç±»å‹
  - `push`ï¼šæ¨é€æ—¶è§¦å‘
  - `pull_request`ï¼šåˆ«äººæäº¤åˆå¹¶è¯·æ±‚æ—¶è§¦å‘
  - `schedule`ï¼šå®šæ—¶è§¦å‘
    - `branches`ï¼šæŒ‡å®šä¼šè§¦å‘è¿™ä¸ªå·¥ä½œæµçš„**åˆ†æ”¯çš„äº‹ä»¶** 
- `jobs`ï¼šé¡¶çº§å­—æ®µï¼ŒåŒ…å«å¤šä¸ªjobï¼Œjobçš„åå­—å¯ä»¥è‡ªå®šä¹‰
  - `run-on`ï¼šè¿è¡Œç¯å¢ƒï¼Œæ”¯æŒä¸‰ç§æ“ä½œç³»ç»Ÿ
    - æœ‰`ubuntu-latest`ã€`windows-latest`ã€`macos-latest`
  - `steps`ï¼šæ“ä½œæ­¥éª¤ï¼Œæ¯ä¸ªstepå‰é¢ç”¨`-`åŒºåˆ†
    - `run`ï¼šæ‰§è¡Œ``
    - `uses`ï¼šè°ƒç”¨åˆ«äººå†™å¥½çš„è‡ªåŠ¨åŒ–æ¨¡å—
    - `with`ï¼šä¼ é€’å‚æ•°ç»™`uses`æˆ–è€…`run`
    - `|`ï¼šå¤šä¸ªå‘½ä»¤ä¸€èµ·è¿è¡Œ
  - `env`ï¼šè®¾ç½®ç¯å¢ƒå˜é‡
- `secrets`ï¼šå­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼Œåœ¨ä»“åº“è®¾ç½®é‡Œè¿›è¡Œé…ç½®
- `timeout-minutes`ï¼šè®¾ç½®è¶…æ—¶æ—¶é—´
  - å¯ä»¥åœ¨`job`æˆ–è€…`step`ä¸‹è¿›è¡Œè®¾ç½®